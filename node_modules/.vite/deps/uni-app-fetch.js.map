{
  "version": 3,
  "sources": ["../../uni-app-fetch/dist/index.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createUniFetch = void 0;\nfunction createUniFetch(config) {\n    var _a, _b;\n    // 记录 loading 的状态\n    const loadingQueue = [];\n    /**\n     * uni-request 封装\n     * @param options\n     * @returns\n     */\n    const uniFetch = (options) => {\n        // 处理基础路径\n        if (!options.url.startsWith('http') && uniFetch.baseURL) {\n            options.url = uniFetch.baseURL + options.url;\n        }\n        // 调用请求拦截器\n        uniFetch.intercept.request(options);\n        // 是否显示加载 loading\n        if (!!(uniFetch === null || uniFetch === void 0 ? void 0 : uniFetch.loading) && !loadingQueue.length) {\n            uni.showLoading(Object.assign({}, uniFetch.loading));\n        }\n        // 记录请求次数\n        loadingQueue.push('loading');\n        // 包装 Promise 对象\n        return new Promise((resolve, reject) => {\n            uni.request(Object.assign(Object.assign({}, options), { success: (result) => {\n                    // 调用响应拦截器\n                    resolve(uniFetch.intercept.response(Object.assign(Object.assign({}, result), { config: options })));\n                }, fail: reject, complete: () => {\n                    // 记录结束的请求数量\n                    loadingQueue.pop();\n                    // 关闭加载提示框\n                    if (!loadingQueue.length)\n                        uni.hideLoading();\n                } }));\n        });\n    };\n    /**\n     * 初始化参数\n     */\n    uniFetch.loading = config === null || config === void 0 ? void 0 : config.loading;\n    uniFetch.baseURL = config === null || config === void 0 ? void 0 : config.baseURL;\n    uniFetch.intercept = {\n        request: (options) => options,\n        response: (result) => result,\n    };\n    if ((_a = config === null || config === void 0 ? void 0 : config.intercept) === null || _a === void 0 ? void 0 : _a.request) {\n        uniFetch.intercept.request = config.intercept.request;\n    }\n    if ((_b = config === null || config === void 0 ? void 0 : config.intercept) === null || _b === void 0 ? void 0 : _b.response) {\n        uniFetch.intercept.response = config.intercept.response;\n    }\n    // 快捷请求方法\n    uniFetch.get = function (url, data = {}) {\n        return uniFetch({ url, method: 'GET', data });\n    };\n    uniFetch.post = function (url, data = {}) {\n        return uniFetch({ url, method: 'POST', data });\n    };\n    uniFetch.put = function (url, data = {}) {\n        return uniFetch({ url, method: 'PUT', data });\n    };\n    uniFetch.delete = function (url, data) {\n        return uniFetch({ url, method: 'DELETE', data });\n    };\n    return uniFetch;\n}\nexports.createUniFetch = createUniFetch;\nexports.default = createUniFetch();\n"],
  "mappings": ";;;;;AAAA;AAAA;AACA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,YAAQ,iBAAiB;AACzB,aAAS,eAAe,QAAQ;AAC5B,UAAI,IAAI;AAER,YAAM,eAAe,CAAC;AAMtB,YAAM,WAAW,CAAC,YAAY;AAE1B,YAAI,CAAC,QAAQ,IAAI,WAAW,MAAM,KAAK,SAAS,SAAS;AACrD,kBAAQ,MAAM,SAAS,UAAU,QAAQ;AAAA,QAC7C;AAEA,iBAAS,UAAU,QAAQ,OAAO;AAElC,YAAI,CAAC,EAAE,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,YAAY,CAAC,aAAa,QAAQ;AAClG,cAAI,YAAY,OAAO,OAAO,CAAC,GAAG,SAAS,OAAO,CAAC;AAAA,QACvD;AAEA,qBAAa,KAAK,SAAS;AAE3B,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,cAAI,QAAQ,OAAO,OAAO,OAAO,OAAO,CAAC,GAAG,OAAO,GAAG,EAAE,SAAS,CAAC,WAAW;AAErE,oBAAQ,SAAS,UAAU,SAAS,OAAO,OAAO,OAAO,OAAO,CAAC,GAAG,MAAM,GAAG,EAAE,QAAQ,QAAQ,CAAC,CAAC,CAAC;AAAA,UACtG,GAAG,MAAM,QAAQ,UAAU,MAAM;AAE7B,yBAAa,IAAI;AAEjB,gBAAI,CAAC,aAAa;AACd,kBAAI,YAAY;AAAA,UACxB,EAAE,CAAC,CAAC;AAAA,QACZ,CAAC;AAAA,MACL;AAIA,eAAS,UAAU,WAAW,QAAQ,WAAW,SAAS,SAAS,OAAO;AAC1E,eAAS,UAAU,WAAW,QAAQ,WAAW,SAAS,SAAS,OAAO;AAC1E,eAAS,YAAY;AAAA,QACjB,SAAS,CAAC,YAAY;AAAA,QACtB,UAAU,CAAC,WAAW;AAAA,MAC1B;AACA,WAAK,KAAK,WAAW,QAAQ,WAAW,SAAS,SAAS,OAAO,eAAe,QAAQ,OAAO,SAAS,SAAS,GAAG,SAAS;AACzH,iBAAS,UAAU,UAAU,OAAO,UAAU;AAAA,MAClD;AACA,WAAK,KAAK,WAAW,QAAQ,WAAW,SAAS,SAAS,OAAO,eAAe,QAAQ,OAAO,SAAS,SAAS,GAAG,UAAU;AAC1H,iBAAS,UAAU,WAAW,OAAO,UAAU;AAAA,MACnD;AAEA,eAAS,MAAM,SAAU,KAAK,OAAO,CAAC,GAAG;AACrC,eAAO,SAAS,EAAE,KAAK,QAAQ,OAAO,KAAK,CAAC;AAAA,MAChD;AACA,eAAS,OAAO,SAAU,KAAK,OAAO,CAAC,GAAG;AACtC,eAAO,SAAS,EAAE,KAAK,QAAQ,QAAQ,KAAK,CAAC;AAAA,MACjD;AACA,eAAS,MAAM,SAAU,KAAK,OAAO,CAAC,GAAG;AACrC,eAAO,SAAS,EAAE,KAAK,QAAQ,OAAO,KAAK,CAAC;AAAA,MAChD;AACA,eAAS,SAAS,SAAU,KAAK,MAAM;AACnC,eAAO,SAAS,EAAE,KAAK,QAAQ,UAAU,KAAK,CAAC;AAAA,MACnD;AACA,aAAO;AAAA,IACX;AACA,YAAQ,iBAAiB;AACzB,YAAQ,UAAU,eAAe;AAAA;AAAA;",
  "names": []
}
